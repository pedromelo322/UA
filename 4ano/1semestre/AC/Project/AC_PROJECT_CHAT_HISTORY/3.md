Ótima atitude. "Meter a mão na massa" é a única forma de realmente dominar o MPLS e o OSPF.

Vamos focar-nos apenas na **Fase 1: Infraestrutura Core (Cisco)**.
O teu objetivo agora é: **Ter todos os 4 routers Cisco (Lisbon, Porto, Core1, Core2) a pingar os Loopbacks uns dos outros através de MPLS.**

Aqui está o que tens de fazer, passo a passo:

### 1. Configurar Interfaces e IPs

Tens de configurar os endereços físicos e lógicos (Loopbacks) de acordo com o plano que definimos.

* **Onde:** Em modo de configuração de interface (`interface f0/0`, `interface loopback 0`, etc.).
* **O que fazer:**
1. Atribuir o IP e a máscara (`/30` para links, `/32` para Loopbacks).
2. Ligar a interface (`no shutdown`).
3. **Nota Importante:** No router **Lisbon** e **Porto**, a interface que liga "para baixo" (para o S1/S2 Linux) **NÃO** deve ter MPLS, é apenas IP normal. MPLS é só entre Ciscos.



### 2. Configurar o Routing OSPF

Sem OSPF, o MPLS não consegue criar etiquetas (porque ele precisa de saber o IP do vizinho primeiro).

* **Onde:** Global config (`router ospf 1`).
* **O que fazer:**
1. Definir o `router-id` manualmente (Usa o IP da Loopback0). Isto é crítico para o MPLS-TE funcionar mais tarde.


2. Anunciar as redes. Podes ser "preguiçoso" e anunciar a gama toda da infraestrutura: `network 10.0.0.0 0.0.255.255 area 0`. Isto apanha todas as interfaces que comecem por `10.0.`.
3. **Opcional mas recomendado:** Nas interfaces Loopback, define o tipo de rede como point-to-point (`ip ospf network point-to-point`) para evitar desperdício de recursos, ou garante que a máscara anunciada é /32.



### 3. Ativar o MPLS (LDP)

Agora transformamos o routing IP em Label Switching.

* **Onde:**
1. Modo Global (`configure terminal`).
2. Modo de Interface (apenas nas interfaces que ligam **Cisco a Cisco**).


* **O que fazer:**
1. Globalmente: Ativar `mpls ip`. (Confirma também se o CEF está ativo com `ip cef`, costuma vir por defeito nos 7200).


2. Nas interfaces físicas (ex: f0/0, f0/1): Escrever `mpls ip`.


3. **Atenção:** NÃO atives `mpls ip` nas interfaces Loopback, nem nas interfaces viradas para os Switches Linux.



---

### Exemplo Prático (Para te guiares)

Imagina que estás no router **Lisbon**.

**1. Interfaces:**

```bash
! Interface para o Core 1
interface FastEthernet0/0
 ip address 10.0.1.1 255.255.255.252
 no shutdown
 mpls ip      ! <--- Ativa MPLS aqui

! Interface para o Switch Linux (S1) - SEM MPLS
interface FastEthernet1/0
 ip address 10.0.1.21 255.255.255.252
 no shutdown
 ! <--- NÃO tem mpls ip aqui

! Loopback de Gestão
interface Loopback0
 ip address 10.0.0.3 255.255.255.255

```

**2. OSPF:**

```bash
router ospf 1
 router-id 10.0.0.3
 network 10.0.0.0 0.0.255.255 area 0

```

**3. MPLS Global:**

```bash
mpls ip

```

---

### Como Validar (Testes)

Depois de configurares os 4 routers, corre estes comandos para ver se passaste a Fase 1:

1. **OSPF:** `show ip route ospf`
* Vês os IPs de Loopback dos outros routers (ex: 10.0.0.1, 10.0.0.4)?


2. 
**Vizinhança MPLS:** `show mpls ldp neighbor` 


* Deves ver os vizinhos Cisco (ex: o Lisbon deve ver o Core1 e Core2). O Estado deve ser "Oper" (Operational).


3. 
**Tabela de Etiquetas:** `show mpls forwarding-table` 


* Deves ver etiquetas (Tags) associadas aos prefixos dos outros routers. Se vires "Untagged" ou "No Label" para os Loopbacks remotos, algo está errado.



**Desafio:** Configura o **Lisbon**, **Porto**, **Core1** e **Core2**. Quando terminares e tiveres conectividade (Ping do Lisbon L0 para Porto L0), diz-me para avançarmos para a configuração dos Switches Linux (FRR).
